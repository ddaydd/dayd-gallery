<template name="daydGalleryUser">
  <div id="dayd-gallery" class="{{isGalerieEditingClass}}">
    <div class="page-header">
      <h1 class="titre">Galerie de {{idToUsername userId}}</h1>

      {{#if isMyGallery}}
        {{#if isGalerieEditing}}
          <div class="pull-right">
            {{#if hasNotGalerie}}
              <button class="btn btn-xs btn-primary enableGalerie">Activer ma galerie</button>
            {{else}}
              <button class="btn btn-xs btn-danger disableGalerie"><i class="fa fa-edit"></i> Desactiver ma galerie</button>
            {{/if}}
            <button class="btn btn-xs btn-default galerie-edit"><i class="fa fa-edit"></i> Termin√©</button>
          </div>
        {{else}}
          <button class="pull-right btn btn-xs btn-primary galerie-edit"><i class="fa fa-edit"></i> Modifier</button>
        {{/if}}
      {{/if}}

      <ol class="breadcrumb">
        <li><a href="/" title="Accueil"><i class="fa fa-home"></i></a></li>
        <li><a href="/galeries" title="Galeries">Galeries</a></li>
        {{#if withFolders}}
          <li class="active">{{idToUsername userId}}</li>
        {{else}}
          <li><a href="{{pathFor 'daydGalleryUser' userId=userId folderId=''}}" title="{{idToUsername userId}}">{{idToUsername userId}}</a></li>
          <li class="active">{{folderName}}</li>
        {{/if}}
      </ol>
    </div>

    {{#if withFolders}}
      {{#each folders}}
        {{> daydGalleryFolder}}
      {{/each}}
      <div class="clearfix"></div>
    {{/if}}

    <div>
      <ul id="images" class="list-unstyled">
        {{#each medias}}
          {{> daydGalleryMedia}}
        {{else}}
          Aucune image
        {{/each}}
      </ul>
      <div class="clearfix"></div>
    </div>

    {{#if isGalerieEditing}}
      <div class="row">
        <div class="col-xs-6">
          {{#if withFolders}}
            <h2 class="titre">Creer un dossier</h2>

            <form id="createFolder">
              <div class="form-group">
                <input name="name" class="form-control" placeholder="folder name">
                <input name="type" type="hidden" value="folder">
              </div>
              <button class="btn btn-xs btn-primary">Creer un dossier</button>
            </form>
          {{/if}}
        </div>

        <div class="col-xs-6">
          <h2 class="titre">Ajouter des images</h2>

          {{#with currentUpload}}
            Uploading <b>{{file.name}}</b>:
            <span id="progress">{{progress.get}}%</span>
          {{else}}
            <input id="fileInput" type="file" class="btn btn-primary"/>
          {{/with}}
        </div>
      </div>
    {{/if}}
  </div>
</template>
